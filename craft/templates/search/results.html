{% extends "_layout" %}

{% set query = craft.request.getParam('q') %}
{% set entries = craft.entries.section('postEntries').search(query).order('score') %}

{% block content %}
  <div class="results">
    <div class="results__wrapper">
      <div class="results__header">
        <h1 class="results__title">Posts matching "{{ query }}"</h1>
      </div>
      {% if entries|length %}
        {% for post in entries %}

          {% set vars = {
            image: post.featuredImage,
            summary: post.postSummary,
            title: post.title,
            url: post.url,
          } %}

          {% include 'partials/search/_result-card' with vars %}
        {% endfor %}
      {% else %}
      <p>Sorry. Your search for “{{ query }}” didn’t return any results.</p>
      {% endif %}
    </div>
  </div>
{% endblock %}
